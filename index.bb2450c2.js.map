{"mappings":"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","sources":["src/js/modules/Users.js","src/js/modules/Login.js","src/js/modules/Orders.js","src/js/modules/Dashboard.js","src/js/app.js","src/js/modules/Navigation.js"],"sourcesContent":["const Permissions = {\n  admin: 'admin',\n  user: 'user',\n  none: 'none'\n};\n\nconst errorUser = [{\n  login: 'error',\n  password: 'error',\n  permissions: Permissions.none,\n  logged: false\n}];\n\nconst users = [{\n  login: 'manager',\n  password: 'haha',\n  permissions: Permissions.admin,\n  logged: false\n}, {\n  login: 'worker',\n  password: 'haha',\n  permissions: Permissions.user,\n  logged: false\n}\n];\n\n\nconst usersKey = 'Users';\n\nexport class Users {\n  permissions = Permissions;\n\n  init() {\n    if (!localStorage.getItem(usersKey)) {\n      localStorage.setItem(usersKey, JSON.stringify(users));\n    }\n  }\n\n  getCurrentUser() {\n    const users = this.getUsers();\n    return users.find(user => user.logged);\n  }\n\n  getUsers() {\n    if (!localStorage.getItem(usersKey)) {\n      console.log('login ERROR');\n      return errorUser;\n    } else {\n      return JSON.parse(localStorage.getItem(usersKey));\n    }\n  }\n\n\n  putUsers(users) {\n    localStorage.setItem(usersKey, JSON.stringify(users));\n    if (users === this.getUsers()) {\n      return true;\n    }\n    return false;\n  }\n\n  authenticate(login, password) {\n    if (!localStorage.getItem(usersKey)) {\n      console.log('login ERROR');\n      return Permissions.none;\n    }\n\n    let storedUsers = JSON.parse(localStorage.getItem(usersKey));\n    let logged = storedUsers.filter(user => {\n      if (user.login == login && user.password == password) {\n        user.logged = true;\n        this.putUsers(storedUsers);\n        return true;\n      }\n      return false;\n    });\n    if (logged.length > 0) {\n      return logged[0].permissions;\n    }\n    return Permissions.none;\n  }\n\n\n}\n\n\n","import {Users} from \"./Users\";\n\nexport class Login {\n    users = new Users();\n\n    handleMenu() {\n        const loginForm = document.querySelector('#login form');\n\n        this.hideMenu()\n\n\n        loginForm.addEventListener('submit', (e) => {\n            let login = e.target[0].value\n            let password = e.target[1].value\n            let permissions = this.users.authenticate(login, password)\n            if (permissions === this.users.permissions.none) {\n                window.alert(\"wrong password or login\")\n            } else {\n                console.log(\"LOGIN permissions: \", permissions)\n                window.location.hash = '#dashboard';\n                this.showMenu()\n            }\n        });\n    }\n\n    hideMenu() {\n        const menu = document.querySelector('aside');\n        menu.classList.add('hide');\n    }\n\n    showMenu() {\n        const menu = document.querySelector('aside');\n        menu.classList.remove('hide');\n    }\n\n}\n","import { Users } from './Users';\n\nconst ProductName = {\n  OversizedBlackShirt: 'Oversized Black Shirt',\n  OversizedWhiteShirt: 'Oversized White Shirt',\n  BlackPants: 'Black Pants',\n  WhitePants: 'White Pants'\n};\n\nconst Size = {\n  XL: 'XL',\n  L: 'L',\n  M: 'M',\n  S: 'S'\n};\n\nconst Icon = {\n  TshirtBlack: 't-shirt',\n  PantsWhite: 'clothes-pants-sweat'\n};\n\nconst orders = [{\n  id: '1',\n  name: ProductName.OversizedBlackShirt,\n  size: Size.XL,\n  daysLeft: 10,\n  checked: true,\n  icon: Icon.TshirtBlack\n}, {\n  id: '2',\n  name: ProductName.OversizedBlackShirt,\n  size: Size.XL,\n  daysLeft: 10,\n  checked: false,\n  icon: Icon.TshirtBlack\n}, {\n  id: '3',\n  name: ProductName.OversizedWhiteShirt,\n  size: Size.XL,\n  daysLeft: 15,\n  checked: false,\n  icon: Icon.PantsWhite\n}, {\n  id: '4',\n  name: ProductName.OversizedWhiteShirt,\n  size: Size.L,\n  daysLeft: 15,\n  checked: false,\n  icon: Icon.TshirtBlack\n}, {\n  id: '5',\n  name: ProductName.WhitePants,\n  size: Size.L,\n  daysLeft: 20,\n  checked: false,\n  icon: Icon.PantsWhite\n}\n];\n\nconst ordersKey = 'Orders';\n\nexport class Orders {\n  users = new Users();\n\n  init() {\n    let ordersToRender = orders;\n    const savedOrders = JSON.parse(localStorage.getItem(ordersKey));\n    if (!savedOrders || !savedOrders.length) {\n      localStorage.setItem(ordersKey, JSON.stringify(orders));\n    } else {\n      ordersToRender = JSON.parse(localStorage.getItem(ordersKey));\n    }\n\n    this.createList(ordersToRender);\n  }\n\n  getOrdersData() {\n    if (!localStorage.getItem(ordersKey)) {\n      console.log('DATABASE ERROR key: ', ordersKey);\n      return '404 ERROR ' + ordersKey;\n    } else {\n      return JSON.parse(localStorage.getItem(ordersKey));\n    }\n  }\n\n  putOrdersData() {\n    let mockOrder = {\n      name: ProductName.OversizedBlackShirt,\n      size: Size.XL,\n      daysLeft: 10,\n      checked: true,\n      icon: Icon.TshirtBlack\n    };\n    let data = this.getOrdersData();\n    data.append(mockOrder);\n\n    localStorage.setItem(ordersKey, JSON.stringify(orders));\n    return this.getOrdersData();\n\n  }\n\n  putOrders(orders) {\n    localStorage.setItem(ordersKey, JSON.stringify(orders));\n    if (orders === this.getOrdersData()) {\n      return true;\n    }\n    return false;\n  }\n\n  getFinishedOrdersRatio() {\n    let data = this.getOrdersData();\n    let finished = 0;\n    let unfinished = 0;\n    data.forEach((item) => {\n      item.checked ? finished += 1 : unfinished += 1;\n    });\n    return finished / (finished + unfinished) * 100;\n  }\n\n  handleCheckBoxClick(checkbox, order) {\n    checkbox.classList.toggle('checked');\n  }\n\n  // rendering function\n  createList(ordersToRender) {\n    const ordersList = document.querySelector('#orders-list');\n    ordersList.innerHTML = '';\n\n    const currentUser = this.users.getCurrentUser();\n    console.log('user', currentUser);\n\n    ordersToRender.map((order, key) => {\n        const checkbox = document.createElement('div');\n        checkbox.classList.add('checkbox');\n        checkbox.classList.toggle('checked', order.checked);\n        checkbox.innerHTML = `<span class=\"iconify\" data-icon=\"ant-design:check-circle-twotone\"></span>`;\n        checkbox.addEventListener('click', () => {\n          console.log('checkbox clicked', order);\n          this.handleCheckBoxClick(checkbox, order);\n        });\n\n        const orderTemplate = `\n                    <div class=\"icon\">\n                        <span class=\"iconify\" \n                        data-icon=\"icon-park-solid:${order.icon}\"></span>\n                    </div>\n                    <div class=\"name\">${order.name}</div>\n                    <div class=\"size\">${order.size}</div>\n                    <div class=\"daysLeft\">${order.daysLeft} days left</div>\n                `;\n        const orderElement = document.createElement('li');\n        orderElement.insertAdjacentHTML('beforeend', orderTemplate);\n        orderElement.append(checkbox);\n\n        if (currentUser.permissions === this.users.permissions.admin) {\n          const deleteButton = document.createElement('div');\n          deleteButton.classList.add('delete');\n          deleteButton.innerHTML = `<span class=\"iconify\" data-icon=\"akar-icons:cross\"></span>`;\n          deleteButton.addEventListener('click', () => {\n            const validOrders = ordersToRender.filter(o => o.id !== order.id);\n            this.putOrders(validOrders);\n            this.createList(validOrders);\n          });\n          orderElement.append(deleteButton);\n        }\n\n        ordersList.append(orderElement);\n      }\n    );\n  }\n}\n\n\n","import {Orders} from \"./Orders\";\n\nexport class Dashboard {\n    ordersFunctions = new Orders();\n\n    renderCharts() {\n        console.log(\"rendering charts\")\n        const container = document.querySelector(\"#svg-container-div\")\n        var svg = this.getNode(\"svg\");\n        container.appendChild(svg);\n\n        // var r = this.getNode('rect', {x: 10, y: 10, width: 100, height: 20, fill: '#ff00ff'});\n        // svg.appendChild(r);\n\n        var r = this.getNode('rect', {\n            x: 20,\n            y: 40,\n            width: 100,\n            height: 40,\n            rx: 8,\n            ry: 8,\n            fill: 'pink',\n            stroke: 'purple',\n            strokeWidth: 7\n        });\n        svg.appendChild(r);\n\n    }\n\n    getNode(n, v) {\n        n = document.createElementNS(\"http://www.w3.org/2000/svg\", n);\n        for (var p in v)\n            n.setAttributeNS(null, p.replace(/[A-Z]/g, function (m, p, o, s) {\n                return \"-\" + m.toLowerCase();\n            }), v[p]);\n        return n\n    }\n\n\n    resetProgressBars() {\n        let progressBars = document.querySelectorAll('[id*=\"progress-bar\"]');\n\n\n        progressBars.forEach((item) => {\n            console.log(item)\n            item.style.backgroundColor = \"red\";\n        })\n        // progressBars.style.backgroundColor = \"red\"\n    }\n\n    setProgressBars() {\n        let progressBars = document.querySelectorAll('[id*=\"progress-bar\"]');\n        let ratio = this.ordersFunctions.getFinishedOrdersRatio()\n\n        progressBars.forEach((item) => {\n            console.log(item)\n            item.style.width = `${ratio}%`;\n            item.style.backgroundColor = ratio < 30 ? 'red' : \"green\";\n        })\n        // progressBars.style.backgroundColor = \"red\"\n    }\n\n\n}\n\n\n","import {Login} from './modules/Login';\nimport {Orders} from './modules/Orders';\nimport {Users} from \"./modules/Users\";\nimport {Navigation} from \"./modules/Navigation\";\nimport {Dashboard} from \"./modules/Dashboard\";\n\nconst loginFunctions = new Login();\nconst usersFunctions = new Users();\nconst navigationFunctions = new Navigation();\n\nwindow.onload = () => {\n    window.location.hash = 'login';\n    navigationFunctions.handleChanges();\n    usersFunctions.init();\n    loginFunctions.handleMenu();\n\n};\n","import { Users } from './Users';\nimport { Login } from './Login';\nimport { Dashboard } from './Dashboard';\nimport { Orders } from './Orders';\n\nexport class Navigation {\n  // users = new Users();\n  login = new Login();\n  dashboard = new Dashboard();\n  orders = new Orders();\n\n  handleChanges() {\n\n    // whole link changes\n    // window.addEventListener('locationchange', function () {\n    //     console.log('location changed!');\n    // });\n\n    // hash changes\n    window.addEventListener('hashchange', (e) => {\n\n      console.log('hash changed!', e.oldURL, e.newURL, typeof (e.newURL));\n\n      this.handleMenu(e.newURL);\n      this.handleDashboard(e.newURL);\n\n      if (e.newURL.includes('orders')) {\n        this.orders.init();\n      }\n    });\n\n\n  }\n\n  handleMenu(url) {\n    if (url.includes('login')) this.login.hideMenu();\n    if (!url.includes('login')) this.login.showMenu();\n  }\n\n  handleDashboard(url) {\n    if (url.includes('dashboard')) {\n      console.log('entered DASHBOARD!');\n      this.dashboard.setProgressBars();\n      // this.dashboard.renderCharts();\n    } else {\n      this.dashboard.resetProgressBars();\n    }\n  }\n\n\n}\n"],"names":["$93af7cca82b79f0d$var$Permissions","admin","user","none","$93af7cca82b79f0d$var$errorUser","login","password","permissions","logged","$93af7cca82b79f0d$var$users","$93af7cca82b79f0d$export$a69f017b19597ff5","init","localStorage","getItem","setItem","JSON","stringify","getCurrentUser","this","getUsers","find","parse","console","log","putUsers","users2","authenticate","storedUsers","filter","length","$0b646e4d019d8890$export$21a94553ffa41578","users","handleMenu","loginForm","document","querySelector","hideMenu","addEventListener","e","target","value","window","alert","location","hash","showMenu","classList","add","remove","$2a1a0029cdaa0261$var$ProductName","$2a1a0029cdaa0261$var$Size","$2a1a0029cdaa0261$var$Icon","$2a1a0029cdaa0261$var$orders","id","name","size","daysLeft","checked","icon","$2a1a0029cdaa0261$export$ed0df17bf864fd7b","ordersToRender","savedOrders","createList","getOrdersData","putOrdersData","mockOrder","append","putOrders","orders1","getFinishedOrdersRatio","data","finished","unfinished","forEach","item","handleCheckBoxClick","checkbox","order","toggle","ordersList","innerHTML","currentUser","map","key","createElement","orderTemplate","orderElement","insertAdjacentHTML","deleteButton","validOrders","o","$82b4f557adf77e55$export$fe82a520fc33e5f4","ordersFunctions","renderCharts","container","svg","getNode","appendChild","r","x","y","width","height","rx","ry","fill","stroke","strokeWidth","n","v","p","createElementNS","setAttributeNS","replace","m","s","toLowerCase","resetProgressBars","querySelectorAll","style","backgroundColor","setProgressBars","progressBars","ratio","$388b617130f03bd4$var$loginFunctions","$388b617130f03bd4$var$usersFunctions","$388b617130f03bd4$var$navigationFunctions","dashboard","orders","handleChanges","oldURL","newURL","handleDashboard","includes","url","onload"],"version":3,"file":"index.bb2450c2.js.map"}