const e={admin:"admin",user:"user",none:"none"},s=[{login:"error",password:"error",permissions:e.none,logged:!1}],t=[{login:"manager",password:"haha",permissions:e.admin,logged:!1},{login:"worker",password:"haha",permissions:e.user,logged:!1}];class r{permissions=e;init(){localStorage.getItem("Users")||localStorage.setItem("Users",JSON.stringify(t))}getCurrentUser(){return this.getUsers().find((e=>e.logged))}getUsers(){return localStorage.getItem("Users")?JSON.parse(localStorage.getItem("Users")):(console.log("login ERROR"),s)}putUsers(e){return localStorage.setItem("Users",JSON.stringify(e)),e===this.getUsers()}authenticate(s,t){if(!localStorage.getItem("Users"))return console.log("login ERROR"),e.none;let r=JSON.parse(localStorage.getItem("Users")),n=r.filter((e=>e.login==s&&e.password==t&&(e.logged=!0,this.putUsers(r),!0)));return n.length>0?n[0].permissions:e.none}}class n{users=new r;handleMenu(){const e=document.querySelector("#login form");this.hideMenu(),e.addEventListener("submit",(e=>{let s=e.target[0].value,t=e.target[1].value,r=this.users.authenticate(s,t);r===this.users.permissions.none?window.alert("wrong password or login"):(console.log("LOGIN permissions: ",r),window.location.hash="#dashboard",this.showMenu())}))}hideMenu(){document.querySelector("aside").classList.add("hide")}showMenu(){document.querySelector("aside").classList.remove("hide")}}class o{ordersFunctions=new p;renderCharts(){console.log("rendering charts");const e=document.querySelector("#svg-container-div");var s=this.getNode("svg");e.appendChild(s);var t=this.getNode("rect",{x:20,y:40,width:100,height:40,rx:8,ry:8,fill:"pink",stroke:"purple",strokeWidth:7});s.appendChild(t)}getNode(e,s){for(var t in e=document.createElementNS("http://www.w3.org/2000/svg",e),s)e.setAttributeNS(null,t.replace(/[A-Z]/g,(function(e,s,t,r){return"-"+e.toLowerCase()})),s[t]);return e}resetProgressBars(){document.querySelectorAll('[id*="progress-bar"]').forEach((e=>{console.log(e),e.style.backgroundColor="red"}))}setProgressBars(){let e=document.querySelectorAll('[id*="progress-bar"]'),s=this.ordersFunctions.getFinishedOrdersRatio();e.forEach((e=>{console.log(e),e.style.width=`${s}%`,e.style.backgroundColor=s<30?"red":"green"}))}}const i="Oversized Black Shirt",a="Oversized White Shirt",d="XL",l="L",c="t-shirt",h="clothes-pants-sweat",g={name:i,size:d,daysLeft:10,checked:!1,icon:c,deleted:!1},u=[{id:"1",name:i,size:d,daysLeft:10,checked:!0,icon:c,deleted:!1},{id:"2",name:i,size:d,daysLeft:10,checked:!1,icon:c,deleted:!1},{id:"3",name:a,size:d,daysLeft:15,checked:!1,icon:h,deleted:!1},{id:"4",name:a,size:l,daysLeft:15,checked:!1,icon:c,deleted:!1},{id:"5",name:"White Pants",size:l,daysLeft:20,checked:!1,icon:h,deleted:!1}];class p{users=new r;init(){let e=u;const s=JSON.parse(localStorage.getItem("Orders"));s&&s.length?e=JSON.parse(localStorage.getItem("Orders")):localStorage.setItem("Orders",JSON.stringify(u)),this.createList(e)}getOrdersData(){return localStorage.getItem("Orders")?JSON.parse(localStorage.getItem("Orders")):(console.log("DATABASE ERROR key: ","Orders"),"404 ERROR Orders")}putOrder(e){let s=this.getOrdersData();return s.push(e),localStorage.setItem("Orders",JSON.stringify(s)),this.getOrdersData()}putOrders(e){return localStorage.setItem("Orders",JSON.stringify(e)),this.getOrdersData()}getFinishedOrdersRatio(){let e=this.getOrdersData(),s=0,t=0;return e.filter((e=>!e.deleted)).forEach((e=>{e.checked?s+=1:t+=1})),s/(s+t)*100}handleCheckBoxClick(e,s,t){e.classList.toggle("checked"),s.checked=!s.checked,this.createList(this.putOrders(t)),this.setProgressBars()}createList(e){const s=document.querySelector("#orders-list");s.innerHTML="";const t=this.users.getCurrentUser();e.filter((e=>!e.deleted)).map(((r,n)=>{const o=document.createElement("div");o.classList.add("checkbox"),o.classList.toggle("checked",r.checked),o.innerHTML='<span class="iconify" data-icon="ant-design:check-circle-twotone"></span>',o.addEventListener("click",(()=>{console.log("checkbox clicked",r),this.handleCheckBoxClick(o,r,e)}));const i=`\n                    <div class="icon">\n                        <span class="iconify" \n                        data-icon="icon-park-solid:${r.icon}"></span>\n                    </div>\n                    <div class="name">${r.name}</div>\n                    <div class="size">${r.size}</div>\n                    <div class="daysLeft">${r.daysLeft} days left</div>\n                `,a=document.createElement("li");if(a.insertAdjacentHTML("beforeend",i),a.append(o),t.permissions===this.users.permissions.admin){const s=document.createElement("div");s.classList.add("delete"),s.innerHTML='<span class="iconify" data-icon="akar-icons:cross"></span>',s.addEventListener("click",(()=>{r.deleted=!0,this.createList(this.putOrders(e)),this.setProgressBars()})),a.append(s)}s.append(a)}));const r=document.createElement("div");r.classList.add("add"),r.innerHTML='<span class="iconify" data-icon="carbon:add-filled"></span>',s.appendChild(r),r.addEventListener("click",(()=>{this.createList(this.putOrder(g)),this.setProgressBars()}))}setProgressBars(){console.log("ORDERS START");let e=document.querySelectorAll('[class*="orders-progress-bar"]'),s=this.getFinishedOrdersRatio();e.forEach((e=>{console.log("ITEEEEM",e),e.style.transition="width 0.5s ease-in-out",e.style.width=`${0==s?2:s}%`,e.style.backgroundColor=s<30?"red":"green"}))}resetProgressBars(){console.log("ORDERS RESET"),document.querySelectorAll('[class*="orders-progress-bar"]').forEach((e=>{e.style.transition="none",e.style.backgroundColor="red",e.style.width="0%"}))}}const m=new n,w=new r,S=new class{login=new n;dashboard=new o;orders=new p;handleChanges(){window.addEventListener("hashchange",(e=>{console.log("hash changed!",e.oldURL,e.newURL,typeof e.newURL),this.handleMenu(e.newURL),this.handleDashboard(e.newURL),e.newURL.includes("orders")&&this.orders.init()}))}handleMenu(e){e.includes("login")&&this.login.hideMenu(),e.includes("login")||this.login.showMenu()}handleDashboard(e){e.includes("dashboard")?(console.log("entered DASHBOARD!"),this.dashboard.setProgressBars()):this.dashboard.resetProgressBars()}};window.onload=()=>{window.location.hash="login",S.handleChanges(),w.init(),m.handleMenu()};
//# sourceMappingURL=index.b33ca8be.js.map
